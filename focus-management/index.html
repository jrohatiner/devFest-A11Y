<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Focus Management</title>
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/tingle.css" />
  </head>
  <body>
    <header>
      <ul>
        <li><a href="../index.html">Home</a></li>
        <li>
          <a href="../screen-readers/index.html">Screen Readers</a>
        </li>
        <li>
          <a href="../accessible-html/index.html">Accessible HTML</a>
        </li>
        <li>
          <a href="../aria/index.html">ARIA</a>
        </li>
        <li>
          <a href="../focus-management/index.html">Focus Management</a>
        </li>
        <li>
          <a href="../visual-considerations/index.html"
            >Visual Considerations</a
          >
        </li>
        <li>
          <a href="../tooling/index.html">Tooling</a>
        </li>
        <li>
          <a href="../resources/index.html">Resources</a>
        </li>
      </ul>
    </header>
    <div id="container">
      <h1>Focus Management</h1>
      <h2>Keyboard only users</h2>
      <p>
        As users navigate around using only the keyboard, focus rings provide a
        necessary clue as to the currently active item.
      </p>
      <img src="../static/webaim-focus.png" alt="WebAIM focus criteria" />
      <p class="codepen" data-height="300" data-slug-hash="BaMMGEw" data-user="jrohatiner" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/jrohatiner/pen/BaMMGEw">
   :focus selector example</a> by Judith (<a href="https://codepen.io/jrohatiner">@jrohatiner</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
      </p>
      <script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
      <h3>Keyboard Shortcuts</h3>
      <p>
        Keyboard shortcuts are another curb cut example. Sites like Twitter and
        Facebook offer keyboard shortcuts for almost any action which are great
        for both keyboard only users <b>and</b> power users!
      </p>
      <h4>Twitter</h4>
      <img
        src="../static/twitter-keyboard.png"
        alt="twitter keyboard shortcuts"
      />
      <h4>Facebook</h4>
      <img
        src="../static/facebook-keyboard.png"
        alt="facebook keyboard shortcuts"
      />
      <h2>Skip links</h2>
      <p>
        Skip links help users <b>skip</b> over large headers and navigation and
        jump right into the "main" content of your site. When a user hits tab
        for the first time, a button will appear and offer users to jump right
        to the main section.
      </p>
      <h3>Github</h3>
      <img src="../static/github-skip.png" alt="github skip link" />
      <h3>NYTimes</h3>
      <img src="../static/nytimes-skip.png" alt="nytimes skip link" />
      <h3>How to make a skip link</h3>
      <div>
        <ol>
          <li>Create an anchor with the body "Skip to content"</li>
          <li>Prepend it to the body of your website</li>
          <li>Make it visually hidden</li>
          <li>Give it a focus state which makes it visible</li>
        </ol>
      </div>
      <img
        src="../static/webaim-skip-links.png"
        alt="WebAIM skip link recommendation"
      />
      <h2>Tab Navigation</h2>
      <p>
        You can use the <b>tab</b> key to navigate to the next tabbable item and
        <b>shift + tab</b> to navigate to the previous item.
      </p>
      <img
        src="../static/webaim-keyboard.png"
        alt="WebAIM keyboard only criteria"
      />
      <h3>Tabbable elements include:</h3>
      <ul>
        <li><pre>&lt;a></pre></li>
        <li>&lt;button></li>
        <li>&lt;input></li>
        <li>&lt;select></li>
        <li>&lt;textarea></li>
        <li>&lt;iframe></li>
      </ul>
      <p>
        Here is a list of some focusable elements
      <ul>
        <li>a with href attribute</li>
        <li>button</li>
        <li>input (not hidden types)</li>
        <li>select</li>
        <li>textarea</li>
        <li>iframe</li>
        <li>Any element with tabindex (value >= 0)</li>
        <li>Any element with contenteditable attribute</li>
      </ul>
      </p>
      <h3>Making an element tabbable</h3>
      <p>
        You can add the
        <a
          href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex"
        >
          tabindex
        </a>
        attribute to any element like this:
      </p>
      <p>
        <code><pre>&lt;div tabindex="0">I'm focusable&lt;/div></pre></code>
      </p>
      <h3>Tabindex values</h3>
      <div>
        <ol>
          <li>
            a <b>negative</b> value means that the element should be focusable,
            but should not be reachable via sequential keyboard navigation;
          </li>
          <li>
            <b>0</b> means that the element should be focusable and reachable
            via sequential keyboard navigation, but its relative order is
            defined by the platform convention;
          </li>
          <li>
            a <b>positive</b> value means should be focusable and reachable via
            sequential keyboard navigation; its relative order is defined by the
            value of the attribute: the sequential follow the increasing number
            of the tabindex. If several elements share the same tabindex, their
            relative order follows their relative position in the document.
          </li>
        </ol>
      </div>

      <h2>Active Element</h2>
      <p>
        Sometimes, especially on single page applications, it's helpful to store
        the currently focused element before a page transition so you can return
        to it later.
      </p>
      <pre>
        <code class="language-javascript">
          // A modal is about to be opened
          // Store the current news item
          const currentItem = document.activeElement;
          // Open the modal
          // On modal close, refocus on the news item they had open
          currentItem.focus()
        </code>
      </pre>
      <h2>Tab trapping</h2>
      <p>
        Another useful concept is tab trapping. Consider opening a modal on a
        page which contains a form. A keyboard only user will want to tab around
        the form but unless we help, tabbing while focused on the last form
        element will send us all the way back to the main document.
      </p>
      <p><button id="tabtrap">Click here</button> for an example modal.</p>
      <h2>Exercise 4</h2>
      <p>
        Let's practice making skip links together in
        <a href="../exercises/4.html">exercise 4</a>.
      </p>
    </div>
    <script src="../js/prism.js"></script>
    <script src="../js/tingle.js"></script>
    <script>
      var btn = document.getElementById("tabtrap");
      // instanciate new modal
      var modal = new tingle.modal({
        footer: true,
        stickyFooter: false,
        closeMethods: ["overlay", "button", "escape"],
        closeLabel: "Close",
        cssClass: ["custom-class-1", "custom-class-2"],
        onOpen: function () {
          console.log("modal open");
        },
        onClose: function () {
          console.log("modal closed");
        },
        beforeClose: function () {
          // here's goes some logic
          // e.g. save content before closing the modal
          return true; // close the modal
          return false; // nothing happens
        },
      });

      // set content
      modal.setContent(
        "<h1>Tab Trapping Example</h1><form><input type='text' placeholder='first name' /><input type='text' placeholder='last name' /><input type='submit' value='submit' /></form>"
      );

      // add a button
      modal.addFooterBtn(
        "Button label",
        "tingle-btn tingle-btn--primary",
        function () {
          // here goes some logic
          modal.close();
        }
      );

      // add another button
      modal.addFooterBtn(
        "Dangerous action !",
        "tingle-btn tingle-btn--danger",
        function () {
          // here goes some logic
          modal.close();
        }
      );

      btn.addEventListener("click", () => {
        // open modal
        modal.open();
      });
    </script>
  </body>
</html>
